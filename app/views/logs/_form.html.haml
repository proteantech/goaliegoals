= form_for [@goal, @log] do |f|
  - if @log.errors.any?
    .alert.alert-error
      = "#{pluralize(@log.errors.count, "error")} prohibited this goal from being saved:"
      %ul
        - @log.errors.full_messages.each do |msg|
          %li= msg
  .field
    = f.label :log_date
    = f.text_field :log_date
  .field
    = f.label :quantity
    = f.text_field :quantity
  .field
    = f.label :description
    = f.text_field :description
  .actions

    - if @log.new_record?
      = link_to goal_logs_url(@goal), class: 'btn btn-secondary', style: 'margin-right: 10px;' do
        %i.icon-arrow-left
        Back to Logs

    = f.submit 'Save', class: 'btn btn-primary'

    - if !@log.new_record?

      .btn-group.dropup{style:'padding-left: 5px;'}
        %a.btn.dropdown-toggle{data: {toggle:'dropdown'}, href: '#'}
          Action
          %span.caret
        %ul.dropdown-menu.dropup
          %li= link_to 'Delete', [@goal, @log], :method => :delete, :data => { :confirm => 'Are you sure?' }
          %li= link_to 'New Log', new_goal_log_path

      .btn-group.dropup
        %a.btn.dropdown-toggle{data: {toggle:'dropdown'}, href: '#'}
          View
          %span.caret
        %ul.dropdown-menu
          %li= link_to 'Details', [@goal, @log]
          %li= link_to 'Goals', goals_path
          %li= link_to 'Goal', edit_goal_path(@goal)
          %li= link_to 'Logs', goal_logs_url(@goal)
:javascript
  $(function() {
    $("#log_log_date").datepicker({dateFormat: "yy-mm-dd"});
  });

